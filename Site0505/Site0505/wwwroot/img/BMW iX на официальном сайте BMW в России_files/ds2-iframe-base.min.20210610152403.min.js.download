define("ds2-iframe-base",["jquery","lazyload","consentcontroller","ds2-main"],function(c,e,b){function d(a){a&&(new e({container:a}),this.element=c(a),this.create())}d.prototype.create=function(){this.pIframe=c(".ds2-iframe--player",this.element);this.pFallback=c(".ds2-iframe--fallback",this.element);this.registerEventListeners();this.privacyCheck()};d.prototype.privacyCheck=function(){b.api.isBrowserPersistenceEnabled(b.api.ENUM_PERSISTENCE_TYPE.COOKIE)?!0!==b.api.isRegulationAccepted()&&b.api.hasRegulation()?
this.fallbackInlineOpen():this.iframeInlineOpen():(window.parent.digitals2.messages.showCookieBrowserDisabled(),this.fallbackInlineOpen())};d.prototype.registerEventListeners=function(){var a=this;c(window).on("ds2-consentChanged",function(c){b.api.isRegulationAccepted()&&a.privacyCheck()});c(".ds2-consent-js--submit",this.element).on("click",function(a){a.preventDefault(a);b.api.isBrowserPersistenceEnabled(b.api.ENUM_PERSISTENCE_TYPE.COOKIE)?(b.api.setRegulationAccepted(),window.parent.location.reload()):
window.parent.digitals2.messages.showCookieBrowserDisabled()})};d.prototype.iframeInlineOpen=function(){var a=this.pIframe.find("iframe");0>=a.length?c("\x3ciframe\x3e\x3c/iframe\x3e").appendTo(this.pIframe).attr("src",this.pIframe.attr("data-src")).attr("height","100%").attr("width","100%"):a.attr("src",a.attr("data-src"));"hide"==this.pFallback.attr("data-author-mode")&&this.pFallback.hide();this.pIframe.show()};d.prototype.fallbackInlineOpen=function(){this.pFallback.show();this.pIframe.hide()};
return d});